@inject IDialogService DialogService
@inject IMarkupLocalizer<AppText> MarkupLocalizer
@inject ISettings Settings
@inject IUserInterfaceMessaging UserInterfaceMessaging

<MudTextFieldExtended T="string" Label="@Label" Variant="Variant.Filled" @bind-Text="FilePath" Immediate Required Validation="@(new Func<string, string?>(ValidateModFilePath))" Disabled="Disabled" ReadOnly>
    <AdornmentStart>
        <MudIcon Icon="@icon" Color="Color.Tertiary" />
    </AdornmentStart>
    <AdornmentEnd>
        <MudStack Row>
            <MudButton Variant="Variant.Filled" StartIcon="@MaterialDesignIcons.Normal.FolderOpen" OnClick="HandleBrowseOnClickAsync" Disabled="Disabled">@MarkupLocalizer[nameof(AppText.Common_Browse_Ellipsis)]</MudButton>
            <MudTooltip Arrow Text="@(AppText.Common_SelectModFileFromCatalog)">
                <MudIconButton Variant="Variant.Filled" Icon="@MaterialDesignIcons.Normal.BookSearch" OnClick="HandleSelectCatalogedModClickAsync" Disabled="Disabled" />
            </MudTooltip>
            @if (DeviceInfo.Current.Platform == DevicePlatform.WinUI)
            {
                <MudTooltip Arrow Text="@(AppText.Common_AcceptADraggedAndDroppedModFile)">
                    <MudIconButton Variant="Variant.Filled" Icon="@MaterialDesignIcons.Normal.Eyedropper" OnClick="HandleDragAndDropOnClickAsync" Disabled="Disabled" />
                </MudTooltip>
            }
        </MudStack>
    </AdornmentEnd>
</MudTextFieldExtended>
