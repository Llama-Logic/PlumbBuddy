@inject ICustomThemes CustomThemes
@inject IPlayer Player

<MudGrid Justify="Justify.Center">
    <MudItem xs="3">
        <MudCard Elevation="5">
            <MudCardMedia Image="/img/PlumbBuddyLogo.svg" Height="160" />
            <MudCardContent>
                <MudTextM3 Typo="TypoM3.Title">PlumbBuddy</MudTextM3>
                <MudChip T="string" Icon="@MaterialDesignIcons.Normal.ThemeLightDark" Variant="Variant.Text">Light or Dark Mode</MudChip>
                <MudTextM3 Typo="TypoM3.Body">Factory default theme.</MudTextM3>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(() => SelectTheme(null))">Select</MudButton>
            </MudCardActions>
        </MudCard>
    </MudItem>
    @foreach (var (slug, customTheme) in CustomThemes.Themes.OrderBy(kv => kv.Key))
    {
        <MudItem xs="3">
            <MudCard Elevation="5">
                <MudCardMedia Image="@($"/img/custom-themes/{slug}/logo.png")" Height="160" />
                <MudCardContent>
                    <MudTextM3 Typo="TypoM3.Title">@customTheme.DisplayName</MudTextM3>
                    @if ((customTheme.PaletteLight is null) == (customTheme.PaletteDark is null))
                    {
                        <MudChip T="string" Icon="@MaterialDesignIcons.Normal.ThemeLightDark" Variant="Variant.Text">Light or Dark Mode</MudChip>
                    }
                    else if (customTheme.PaletteLight is null)
                    {
                        <MudChip T="string" Icon="@MaterialDesignIcons.Normal.LightbulbNight" Color="Color.Dark">Dark Mode Only</MudChip>
                    }
                    else
                    {
                        <MudChip T="string" Icon="@MaterialDesignIcons.Outline.LightbulbOn">Light Mode Only</MudChip>
                    }
                    <MudMarkdown Value="@customTheme.Description" />
                </MudCardContent>
                <MudCardActions>
                    <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(() => SelectTheme(slug))">Select</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
    }
</MudGrid>