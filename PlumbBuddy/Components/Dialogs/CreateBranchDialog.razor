@inject IDialogService DialogService
@inject IMarkupLocalizer<AppText> MarkupLocalizer

<MudDialog Class="secondary-dialog">
	<TitleContent>
		<MudStack Row="true">
			<MudIcon Icon="@MaterialDesignIcons.Normal.CallSplit" Color="Color.Secondary" />
			<MudTextM3 Typo="TypoM3.Title" Color="Color.Secondary">
				Create Branch
			</MudTextM3>
		</MudStack>
	</TitleContent>
	<DialogContent>
		<MudStack>
			<MudTextField @bind-Value="@ChronicleName" Adornment="Adornment.Start" AdornmentIcon="@MaterialDesignIcons.Normal.Label" AdornmentColor="Color.Secondary" HelperText="This is the name your new chronicle will have." Label="Name" Variant="Variant.Filled" />
			<MudTextField @bind-Value="@Notes" Adornment="Adornment.Start" AdornmentIcon="@MaterialDesignIcons.Normal.Note" AdornmentColor="Color.Secondary" Label="Notes" Lines="5" Variant="Variant.Filled" Clearable />
			<MudTextField @bind-Value="@GameNameOverride" Adornment="Adornment.Start" AdornmentIcon="@MaterialDesignIcons.Normal.Rename" AdornmentColor="Color.Secondary" HelperText="I will set the save's game name to whatever you enter here, if you enter something, so that you can easily distinguish this chronicle's saves when loading in The Sims 4." Label="Game Name Override" Variant="Variant.Filled" Clearable />
			<MudField Label="Custom Thumbnail" Variant="Variant.Filled">
				<MudStack Spacing="1">
					@if (!Thumbnail.IsDefaultOrEmpty)
					{
						<MudImage Src="@($"data:image/png;base64,{Convert.ToBase64String(Thumbnail.ToArray())}")" Width="180" Height="120" ObjectFit="ObjectFit.Contain" ObjectPosition="ObjectPosition.Center" />
					}
					<MudStack Row>
						<MudButton OnClick="BrowseForCustomThumbnailAsync" StartIcon="@MaterialDesignIcons.Normal.FolderOpen" Variant="Variant.Filled">
							Browse...
						</MudButton>
						@if (!Thumbnail.IsDefaultOrEmpty)
						{
							<MudIconButton Icon="@MaterialDesignIcons.Normal.Eraser" OnClick="ClearThumbnail" Variant="Variant.Filled" />
						}
					</MudStack>
				</MudStack>
			</MudField>
		</MudStack>
	</DialogContent>
	<DialogActions>
		<MudButton OnClick="CancelOnClickHandler">
			@MarkupLocalizer[nameof(AppText.Common_Cancel)]
		</MudButton>
		<MudButton Color="Color.Secondary" OnClick="OkOnClickHandler">
			@MarkupLocalizer[nameof(AppText.Common_Ok)]
		</MudButton>
	</DialogActions>
</MudDialog>
