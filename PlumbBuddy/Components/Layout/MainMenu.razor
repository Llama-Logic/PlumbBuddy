@implements IDisposable
@inject IAppLifecycleManager AppLifecycleManager
@inject IDialogService DialogService
@inject IPlayer Player
@inject ISmartSimObserver SmartSimObserver
@inject ISnackbar Snackbar

<style>
    nav.main-menu div.mud-nav-item a:not(:hover) {
        background: transparent !important;
    }
</style>

<MudPaper Style="height: 100vh;">
    <MudAnimate Selector="#menuLogo" AnimationType="AnimationType.Scale" Value="0.9" ValueSecondary="1" Duration="0.5" Infinite="true" AnimationTiming="AnimationTiming.EaseOut" AnimationDirection="AnimationDirection.Alternate" />
    <MudBadge Color="Color.Warning" Content="@devToolsUnlockProgress" Origin="Origin.BottomCenter" Overlap="true" Visible="@devToolsUnlockProgressBadgeVisible">
        <MudImage id="menuLogo" Src="/img/PlumbBuddyLogo.svg" Width="208" Height="208" ObjectFit="ObjectFit.Fill" Style="margin: 16px;" @onclick="HandleVersionOnClick" />
    </MudBadge>
    <MudTextM3 Typo="TypoM3.Headline" Size="Size.Medium" Align="Align.Center">PlumbBuddy</MudTextM3>
    <MudTextM3 Typo="TypoM3.Body" Size="Size.Small" Align="Align.Center">The friendly helper for Sims 4 mods</MudTextM3>
    <MudTextM3 Typo="TypoM3.Label" Size="Size.Small" Align="Align.Center">(Version @AppInfo.VersionString)</MudTextM3>
    <MudNavMenu Class="main-menu">
        <MudDivider Class="my-2" />
        <MudNavLink Icon="@MaterialDesignIcons.Normal.FolderWrench" IconColor="Color.Primary" OnClick="OpenModsFolderHandlerAsync">Open Mods Folder</MudNavLink>
        <MudNavLink Icon="@MaterialDesignIcons.Normal.Eraser" IconColor="Color.Primary" OnClick="ClearCacheHandlerAsync">Clear Cache</MudNavLink>
        <MudNavLink Icon="@MaterialDesignIcons.Normal.FaceAgent" IconColor="Color.Info">Ask for Help</MudNavLink>
        <MudDivider Class="my-2" />
        <MudNavLink Icon="@MaterialDesignIcons.Normal.Cog" IconColor="Color.Tertiary" OnClick="SettingsOnClickHandlerAsync">Settings</MudNavLink>
        @if (Player.DevToolsUnlocked)
        {
            <MudNavGroup Icon="@MaterialDesignIcons.Normal.Tools" IconColor="Color.Warning" Title="Dev Tools">
                <MudNavLink Icon="@MaterialDesignIcons.Normal.HumanGreeting" OnClick="ReonboardOnClickHandlerAsync">Get Reacquainted</MudNavLink>
                <MudNavLink Icon="@MaterialDesignIcons.Normal.Palette" OnClick="ToggleThemeManagerOnClickHandlerAsync">Toggle Theme Manager</MudNavLink>
            </MudNavGroup>
        }
        @if (DeviceInfo.Current.Platform == DevicePlatform.WinUI)
        {
            <MudNavLink Icon="@MaterialDesignIcons.Normal.WindowClose" IconColor="Color.Primary" OnClick="CloseWindowOnClickHandlerAsync">Close Window</MudNavLink>
            <MudDivider Class="my-2" />
            <MudNavLink Icon="@MaterialDesignIcons.Normal.Power" IconColor="Color.Warning" OnClick="ShutdownPlumbBuddyOnClickHandlerAsync">Shutdown PlumbBuddy</MudNavLink>
        }
    </MudNavMenu>
</MudPaper>
